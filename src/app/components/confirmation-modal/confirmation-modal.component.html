<!-- Overlay (fond sombre) -->
@if (isOpen) {
  <div class="modal-overlay" (click)="onClose()">
    <!-- Contenu du modal -->
    <div class="modal-content" (click)="onContentClick($event)" [class.modal-loading]="isLoading">

      <!-- Bouton de fermeture (X) -->
      <button
        class="modal-close-btn"
        (click)="onClose()"
        [disabled]="isLoading"
        aria-label="Fermer"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>

      <!-- IcÃ´ne selon le type -->
      <div class="modal-icon" [class]="'modal-icon-' + type">
        @switch (type) {
          @case ('delete') {
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="3 6 5 6 21 6"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              <line x1="10" y1="11" x2="10" y2="17"/>
              <line x1="14" y1="11" x2="14" y2="17"/>
            </svg>
          }
          @case ('update') {
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
          }
          @case ('warning') {
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
          }
          @case ('info') {
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
          }
        }
      </div>

      <!-- Titre -->
      <h2 class="modal-title">{{ title }}</h2>

      <!-- Message -->
      <p class="modal-message">{{ message }}</p>

      <!-- Actions -->
      <div class="modal-actions">
        <button
          class="modal-btn modal-btn-cancel"
          (click)="onCancel()"
          [disabled]="isLoading"
        >
          {{ cancelText }}
        </button>

        <button
          class="modal-btn modal-btn-confirm"
          [class]="'modal-btn-' + type"
          (click)="onConfirm()"
          [disabled]="isLoading"
        >
          @if (isLoading) {
            <span class="modal-spinner"></span>
            <span>Chargement...</span>
          } @else {
            <span>{{ confirmText }}</span>
          }
        </button>
      </div>
    </div>
  </div>
}
