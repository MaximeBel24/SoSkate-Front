<div class="list-container">
  <!-- Header avec titre et actions -->
  <app-list-header
    title="Liste des spots"
    [count]="spots().length"
    countLabel="spot"
    buttonText="Ajouter un spot"
    [buttonLink]="['..', 'new']"
  />

  <!-- Table responsive -->
  <div class="table-wrapper">
    <table class="data-table">
      <thead>
      <tr>
        <th class="col-id">ID</th>
        <th class="col-name">Nom</th>
        <th class="col-address xs-hide">Adresse</th>
        <th class="col-coords xs-hide">Coordonn√©es</th>
        <th class="col-status">Statut</th>
        <th class="col-dates xs-hide">Dates</th>
        <th class="col-actions">Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (spot of spots(); track spot.id) {
          <tr>
            <!-- ID -->
            <app-cell-id [id]="spot.id" />

            <!-- Nom -->
            <td class="col-name">
              <div class="cell-name">
                <span class="name-primary">{{ spot.name }}</span>
                <span class="name-secondary">
                  {{ spot.isIndoor ? "Int√©rieur" : "Ext√©rieur" }}
                </span>
              </div>
            </td>

            <!-- Adresse -->
            <td class="col-address xs-hide">
              <div class="cell-address">
                <span class="address-main">{{ spot.address }}</span>
                <span class="address-secondary">{{ spot.zipCode }} {{ spot.city }}</span>
              </div>
            </td>

            <!-- Coordonn√©es -->
            <td class="col-coords xs-hide">
              <div class="cell-coords">
                <span class="coord-item">
                  <span class="coord-label">Lat:</span>
                  {{ spot.latitude | number: "1.4-4" }}
                </span>
                <span class="coord-item">
                  <span class="coord-label">Lng:</span>
                  {{ spot.longitude | number: "1.4-4" }}
                </span>
              </div>
            </td>

            <!-- Statut -->
            <app-cell-status [isActive]="spot.isActive" />

            <!-- Dates -->
            <app-cell-dates
              [createdAt]="spot.createdAt"
              [updatedAt]="spot.updatedAt"
            />

            <!-- Actions -->
            <app-cell-actions
              [editLink]="['..', spot.id, 'edit']"
              (delete)="openDeleteModal(spot.id, spot.name)"
            />
          </tr>
        } @empty {
          <tr class="empty-row">
            <td colspan="7">
              <app-empty-state
                icon="üõπ"
                title="Aucun spot disponible"
                message="Commencez par ajouter votre premier spot de skateboard"
                buttonText="Cr√©er un spot"
                [buttonLink]="['..', 'new']"
              />
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<app-confirmation-modal
  [isOpen]="deleteModal.isOpen"
  [type]="'delete'"
  [title]="'Supprimer le spot'"
  [message]="'√ätes-vous s√ªr de vouloir supprimer le spot ' + deleteModal.spotName + ' ? Cette action est irr√©versible.'"
  [confirmText]="'Supprimer'"
  [cancelText]="'Annuler'"
  [isLoading]="deleteModal.isLoading"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()"
  (close)="closeDeleteModal()"
/>
