<div class="list-container">
  <!-- Header avec titre et actions -->
  <app-list-header
    title="Liste des prestations"
    [count]="services().length"
    countLabel="prestation"
    buttonText="Ajouter une prestation"
    [buttonLink]="['..', 'new']"
  />

  <!-- Table responsive -->
  <div class="table-wrapper">
    <table class="data-table">
      <thead>
      <tr>
        <th class="col-id">ID</th>
        <th class="col-name">Nom</th>
        <th class="col-type xs-hide">Type</th>
        <th class="col-duration xs-hide">Dur√©e</th>
        <th class="col-price xs-hide">Prix</th>
        <th class="col-status">Statut</th>
        <th class="col-dates xs-hide">Dates</th>
        <th class="col-actions">Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (service of services(); track service.id) {
          <tr>
            <!-- ID -->
            <app-cell-id [id]="service.id" />

            <!-- Nom -->
            <td class="col-name">
              <div class="cell-name">
                <span class="name-primary">{{ service.name }}</span>
              </div>
            </td>

            <!-- Type -->
            <td class="col-type xs-hide">
              <div class="cell-name">
                <span class="name-primary">{{ label[service.type!] }}</span>
              </div>
            </td>

            <!-- Dur√©e -->
            <td class="col-duration xs-hide">
              <div class="cell-name">
                <span class="name-primary">{{ service.durationMinutes | duration }}</span>
              </div>
            </td>

            <!-- Prix -->
            <td class="col-price xs-hide">
              <div class="cell-name">
                <span class="name-primary">{{ service.basePriceCents | price }}</span>
              </div>
            </td>

            <!-- Statut -->
            <app-cell-status [isActive]="service.isActive" />

            <!-- Dates -->
            <app-cell-dates
              [createdAt]="service.createdAt"
              [updatedAt]="service.updatedAt"
            />

            <!-- Actions -->
            <app-cell-actions
              [editLink]="['..', service.id, 'edit']"
              (delete)="openDeleteModal(service.id, service.name)"
            />
          </tr>
        } @empty {
          <tr class="empty-row">
            <td colspan="8">
              <app-empty-state
                icon="üõπ"
                title="Aucune prestation disponible"
                message="Commencez par ajouter votre premi√®re prestation de skateboard"
                buttonText="Cr√©er une prestation"
                [buttonLink]="['..', 'new']"
              />
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<app-confirmation-modal
  [isOpen]="deleteModal.isOpen"
  [type]="'delete'"
  [title]="'Supprimer la prestation'"
  [message]="'√ätes-vous s√ªr de vouloir supprimer la prestation ' + deleteModal.serviceName + ' ? Cette action est irr√©versible.'"
  [confirmText]="'Supprimer'"
  [cancelText]="'Annuler'"
  [isLoading]="deleteModal.isLoading"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()"
  (close)="closeDeleteModal()"
/>
