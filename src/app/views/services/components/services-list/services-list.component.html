<div class="list-container">
  <!-- Header avec titre et actions -->
  <div class="list-header">
    <div class="header-content">
      <h2 class="list-title">Liste des prestations</h2>
      <span class="list-count">{{ services().length }} prestation(s)</span>
    </div>
    <button [routerLink]="['..', 'new']" class="btn btn-premium">
      <span class="btn-icon">+</span>
      Ajouter une prestation
    </button>
  </div>

  <!-- Table responsive -->
  <div class="table-wrapper">
    <table class="data-table">
      <thead>
      <tr>
        <th class="col-id">ID</th>
        <th class="col-name">Nom</th>
        <th class="col-address xs-hide">Type</th>
        <th class="col-address xs-hide">Dur√©e</th>
        <th class="col-address xs-hide">Prix</th>
        <th class="col-status">Statut</th>
        <th class="col-dates xs-hide">Dates</th>
        <th class="col-actions">Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (service of services(); track service.id) {
          <tr>
            <!-- ID -->
            <td class="col-id">
              <span class="cell-id">#{{ service.id }}</span>
            </td>

            <!-- Nom -->
            <td class="col-name">
              <div class="cell-name">
                <span class="name-primary">{{ service.name }}</span>
              </div>
            </td>

            <!-- Type -->
            <td class="col-name xs-hide">
              <div class="cell-name">
                <span class="name-primary">{{ label[service.type!] }}</span>
              </div>
            </td>

            <!-- Dur√©e -->
            <td class="col-name xs-hide">
              <div class="cell-name">
                <span class="name-primary">{{ service.durationMinutes | duration }}</span>
              </div>
            </td>

            <!-- Prix -->
            <td class="col-name xs-hide">
              <div class="cell-name">
                <span class="name-primary">{{ service.basePriceCents | price }}</span>
              </div>
            </td>

            <!-- Statut -->
            <td class="col-status">
              <span
                class="status-badge"
                [class.status-active]="service.isActive"
                [class.status-inactive]="!service.isActive"
              >
                {{ service.isActive ? "Actif" : "Inactif" }}
              </span>
            </td>

            <!-- Dates -->
            <td class="col-dates xs-hide">
              <div class="cell-dates">
                <span class="date-item">
                  <span class="date-label">Cr√©√©:</span>
                  {{ service.createdAt | date : "dd/MM/yyyy" }}
                </span>
                <span class="date-item">
                  <span class="date-label">MAJ:</span>
                  {{ service.updatedAt | date : "dd/MM/yyyy" }}
                </span>
              </div>
            </td>

            <!-- Actions -->
            <td class="col-actions">
              <div class="action-buttons">
                <button
                  [routerLink]="['..', service.id, 'edit']"
                  class="btn-action btn-action-edit"
                  title="Modifier"
                >
                  <app-icon-edit [size]="16" />
                  <span class="xs-hide">Modifier</span>
                </button>
                <button
                  (click)="openDeleteModal(service.id, service.name)"
                  class="btn-action btn-action-delete"
                  title="Supprimer"
                >
                  <app-icon-delete [size]="16" />
                  <span class="xs-hide">Supprimer</span>
                </button>
              </div>
            </td>
          </tr>
        } @empty {
          <tr class="empty-row">
            <td colspan="8">
              <div class="empty-state">
                <div class="empty-icon">üõπ</div>
                <h3 class="empty-title">Aucune prestation disponible</h3>
                <p class="empty-text">
                  Commencez par ajouter votre premi√®re prestation de skateboard
                </p>
                <button [routerLink]="['..', 'new']" class="btn btn-premium">
                  Cr√©er une prestation
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<app-confirmation-modal
  [isOpen]="deleteModal.isOpen"
  [type]="'delete'"
  [title]="'Supprimer la prestation'"
  [message]="'√ätes-vous s√ªr de vouloir supprimer la prestation ' + deleteModal.serviceName + ' ? Cette action est irr√©versible.'"
  [confirmText]="'Supprimer'"
  [cancelText]="'Annuler'"
  [isLoading]="deleteModal.isLoading"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()"
  (close)="closeDeleteModal()"
/>
